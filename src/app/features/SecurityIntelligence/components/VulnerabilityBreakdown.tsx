'use client';

import { Shield, AlertTriangle, AlertCircle, Info } from 'lucide-react';

interface VulnerabilityBreakdownProps {
  critical: number;
  high: number;
  medium: number;
  low: number;
  compact?: boolean;
}

/**
 * VulnerabilityBreakdown - Display vulnerability counts by severity
 */
export default function VulnerabilityBreakdown({
  critical,
  high,
  medium,
  low,
  compact = false,
}: VulnerabilityBreakdownProps) {
  const items = [
    { label: 'Critical', count: critical, color: 'text-red-500', bgColor: 'bg-red-500/20', Icon: Shield },
    { label: 'High', count: high, color: 'text-orange-400', bgColor: 'bg-orange-400/20', Icon: AlertTriangle },
    { label: 'Medium', count: medium, color: 'text-yellow-400', bgColor: 'bg-yellow-400/20', Icon: AlertCircle },
    { label: 'Low', count: low, color: 'text-blue-400', bgColor: 'bg-blue-400/20', Icon: Info },
  ];

  if (compact) {
    return (
      <div className="flex items-center gap-4" data-testid="vulnerability-breakdown-compact">
        {items.map(({ label, count, color }) => (
          <div key={label} className="flex items-center gap-1">
            <span className={`text-sm font-medium ${color}`}>{count}</span>
            <span className="text-xs text-gray-500">{label[0]}</span>
          </div>
        ))}
      </div>
    );
  }

  return (
    <div className="grid grid-cols-4 gap-3" data-testid="vulnerability-breakdown">
      {items.map(({ label, count, color, bgColor, Icon }) => (
        <div
          key={label}
          className={`flex flex-col items-center p-3 rounded-lg ${bgColor} transition-all hover:scale-105`}
        >
          <Icon className={`w-5 h-5 ${color} mb-1`} />
          <span className={`text-2xl font-light ${color}`}>{count}</span>
          <span className="text-xs text-gray-400">{label}</span>
        </div>
      ))}
    </div>
  );
}
